<header class="PageHeader cf">
  <h2>CSV Download</h2>
</header>

<form class="FormRow" name="csvDownloadFilters">
  <label>
    Filter by provider:
    <select name="provider" ng-model="provider" ng-options="p.id as p.name for p in providers | orderBy:'name'" ng-change="submitFilters()">
      <option value="">(All providers)</option>
    </select>
  </label>
</form>

<table class="ListTable" cellpadding="0" cellspacing="0" border="0" width="100%">
  <thead>
    <tr>
      <th>Date</th>
      <th>Date Uploaded</th>
      <th>Provider</th>
      <th>Submitted By</th>
      <th>Rows</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr dir-paginate="csv in uploads.results | itemsPerPage: 20"
        total-items="uploads.count" current-page="currentPage">
      <td>{{ ::csv.month | date:'MMM yyyy'}} Upload</td>
      <td>
        <timestamp ng-model="csv.modified"></timestamp>
      </td>
      <td>{{ ::csv.provider }}</td>
      <td>{{ ::csv.created_by }}</td>
      <td>{{ ::csv.rows }}</td>
      <td><a href="" ng-click="download(csv)">Download</a></td>
    </tr>
  </tbody>
</table>

<dir-pagination-controls on-page-change="pageChanged(newPageNumber)"></dir-pagination-controls>
