header.PageHeader.cf
  h1.u-pullLeft Assign a provider
// no providers
div(ng-show="suggested_providers.length < 1 && ! suggested_provider")
  p.Error.Error--basic
    | There are 
    strong no providers available
    | to assign to this case. Please contact a supervisor.
  p
    a(ui-sref="case_detail.edit") Return to case
div(ng-show="!suggested_provider && suggested_providers.length > 0")
  p.Error.Error--basic
    | This case has 
    strong no category assigned
    | but you can still manually assign a provider.
  p
    a(ui-sref="case_detail.edit") Return to case
form(method="post", name="assign_provider_form", ng-submit="assign(assign_provider_form)")
  div(ng-show="selected_provider.id")
    .ContactBlock.ContactBlock--grey.clearfix
      h2.ContactBlock-heading {{ selected_provider.name }}
      p
        | {{ selected_provider.telephone_frontdoor }} (Front door)
        br
        | {{ selected_provider.telephone_backdoor }} (Back door)
  div(ng-show="is_manual && suggested_providers.length > 0")
    .FormRow.cf
      input.FormRow-field--l(type="text", name="provider-search", placeholder="Search providers and other help organisations", ng-model="provider_search")
    .FormRow.FormRow--group(ng-repeat="provider in suggested_providers | filter:provider_search")
      label.FormRow-label.FormRow-label--odd
        input(name="provider", type="radio", ng-model="$parent.selected_provider", ng-value="provider")
        strong {{ provider.name }}
        p.FormRow-inner
          | {{ provider.telephone_frontdoor }} (Front door)
          br
          | {{ provider.telephone_backdoor }} (Back door)
    .FormRow.cf
      label.visuallyhidden(for="notes") Reassignment notes
      textarea#notes(name="notes", cols="30", rows="4", ng-model="notes", placeholder="Provider reassignment comments")
  .FormActions
    span.Error-message(ng-show="errors.__all__") {{ errors.__all__ }}
    button.Button(type="submit", ng-show="suggested_providers.length > 0 || suggested_provider") Assign provider
    a.Button.Button--secondary(ui-sref="case_detail.defer_assignment") Defer assignment
    a.Button.Button--secondary(ng-click="assignManually(true)", ng-show="!is_manual && suggested_providers.length > 0") Assign other provider manually
    a(ui-sref="case_detail.edit", ng-show="!is_manual") Cancel
    a.Button.Button--secondary(ng-click="decline_help()", ng-show="is_manual && suggested_provider.id") Decline help
    a(href="", ng-click="assignManually(false)", ng-show="is_manual && suggested_provider.id") Cancel
